#!/usr/bin/env -S bash -e
#
# Configuration script.
#
# @package    Bash
# @author     Kai Kimera <mail@kai.kim>
# @copyright  2023 Library Online
# @license    MIT
# @version    0.1.0
# @link
# -------------------------------------------------------------------------------------------------------------------- #

(( EUID != 0 )) && { echo >&2 'This script should be run as root!'; exit 1; }

# -------------------------------------------------------------------------------------------------------------------- #
# INITIALIZATION.
# -------------------------------------------------------------------------------------------------------------------- #

init() {
  # Apps.
  bash="$( command -v bash )"
  curl="$( command -v curl )"

  # Run.
  conf "${1}"
}

# -------------------------------------------------------------------------------------------------------------------- #
# CONFIGURATION SCRIPTS.
# -------------------------------------------------------------------------------------------------------------------- #

conf() {
  local conf; conf="${1}"; IFS=';' read -ra conf <<< "${conf}"

  for i in "${conf[@]}"; do
    echo "--- [${i^^}] Installing a configuration..."
    ${curl} -sSL "https://uaik.github.io/conf/${i}.sh" | ${bash} -
  done
}

# -------------------------------------------------------------------------------------------------------------------- #
# -------------------------------------------------< RUNNING SCRIPT >------------------------------------------------- #
# -------------------------------------------------------------------------------------------------------------------- #

init "$@"; exit 0
